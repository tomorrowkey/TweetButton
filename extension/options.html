<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Tweet Button option</title>
		<script type="text/javascript" src="script.js"></script>
		<script>
			function load() {
				var tweet_format = document.getElementById('tweet_format');
				tweet_format.value = getTweetFormat();
				var auto_close = document.getElementById('auto_close');
				auto_close.checked = getAutoClose();
				var auto_close_delay = document.getElementById('auto_close_delay');
				auto_close_delay.value = getAutoCloseDelay() / 1000;
			}

			function save() {
				var tweet_format = document.getElementById('tweet_format').value;
				var auto_close = document.getElementById('auto_close').checked;
				var auto_close_delay = document.getElementById('auto_close_delay').value;

				if(!isNumeric(auto_close_delay)) {
					alert('auto close delay is not numeric');
					return;
				}

				saveTweetFormat(tweet_format);
				saveAutoClose(auto_close);
				saveAutoCloseDelay(parseInt(auto_close_delay) * 1000);

				alert('saved');
			}

			function restoreDefault() {
				restoreTweetFormat();
				restoreAutoClose();
				restoreAutoCloseDelay();
				load();
				alert('saved');
			}


			window.onload = load;

		</script>
	</head>
	<body>
		<h1>Tweet Button option</h1>
		<hr />
		<h3>Tweet format</h3>
		<dl>
			<dt>
				{title}
			</dt>
			<dd>
				viewing page title
			</dd>
			<dt>
				{url}
			</dt>
			<dd>
				viewing page url
			</dd>
		</dl>
		<input type="text" id="tweet_format" size="100" />
		<h3>Window auto close</h3>
		<p>
			<input type="checkbox" id="auto_close" />
			After a tweet automatically close the window
		</p>
		<p>
			Auto close delay
			<input type="text" id="auto_close_delay" />
			[s]
		</p>
		<hr />
		<input type="button" value="save" onclick="save();" />
		<input type="button" value="reset" onclick="load();" />
		<input type="button" value="restore default value" onclick="restoreDefault();" />
	</body>
</html>
